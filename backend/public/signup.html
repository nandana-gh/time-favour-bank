<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - HourBank</title>
    <link rel="stylesheet" href="signup.css">
</head>
<body>

    <header>
        <div class="logo">üåê HourBank</div>
        <nav>
            <a href="index.html">Home</a>
            <a href="about.html">About Us</a>
            <a href="contact.html">Contact</a>
        </nav>
    </header>

    <main class="signup-container">
        <h2>Create an Account</h2>
        <!-- Signup Form -->
        <form id="signupForm" onsubmit="handleSignUp()">
            <input id="name" type="text" placeholder="Full Name" required>
            <input id="email" type="email" placeholder="Email" required>
            <input id="age" type="number" placeholder="Age" required>
            <input id="education" type="text" placeholder="Education" required>
            <input id="skills" type="text" placeholder="Skills (comma-separated)" required>
            <input id="password" type="password" placeholder="Create Password" required>
            <input id="confirmPassword" type="password" placeholder="Confirm Password" required>
            <button type="submit">Sign Up</button>
        </form>
        <p>Already have an account? <a href="index.html">Login</a></p>
    </main>

    <footer>
        ¬© 2025 HourBank. All rights reserved.
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>

      // Function to handle Sign Up
      const handleSignUp = async (e) => {
        e.preventDefault();

        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const age = document.getElementById('age').value;
        const education = document.getElementById('education').value;
        const skills = document.getElementById('skills').value;
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        if (password !== confirmPassword) {
          alert("Passwords do not match!");
          return;
        }

        try {
          const response = await axios.post('/api/auth/register', {
            username: name,
            email,
            password,
            skills: skills.split(','),
          });

          // If registration is successful, you can redirect the user or show a success message
          alert(response.data.message);
          window.location.href = 'index.html'; // Redirect to login page after successful sign up

        } catch (err) {
          alert("Error during registration: " + err.response.data.message);
        }
      };

      // Listen for form submission
      document.getElementById('signupForm').addEventListener('submit', handleSignUp);

      // Function to handle Login (already shared in previous code)
      const handleLogin = async (e) => {
        e.preventDefault();

        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        try {
          const response = await axios.post('http://localhost:5000/api/auth/login', { email, password });
          if (response.data.token) {
            localStorage.setItem('authToken', response.data.token);
            alert('Login successful!');
            window.location.href = 'dashboard.html'; // Redirect to dashboard
          }
        } catch (err) {
          alert('Invalid credentials');
        }
      };



    </script>

</body>
</html>
